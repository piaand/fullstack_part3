(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(1),o=t(15),u=t.n(o),a=t(6),i=t(3),l=function(e){var n=e.name,t=e.number,c=e.deleteThisName;return Object(r.jsxs)("p",{children:[n,", ",t," ",Object(r.jsx)("button",{onClick:c,children:"delete"})]})},s=function(e){var n=e.persons,t=e.deleteThisName;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)("div",{children:n.map((function(e){return Object(r.jsx)(l,{name:e.name,number:e.number,deleteThisName:function(){return t(e.id)}},e.id)}))})]})},d=function(e){var n=e.addPerson,t=e.handleNewPersonChange,c=e.handleNewNumberChange,o=e.newName,u=e.newNumber;return Object(r.jsxs)("form",{onSubmit:n,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{onChange:t,value:o}),Object(r.jsx)("br",{}),"number: ",Object(r.jsx)("input",{onChange:c,value:u})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},b=function(e){var n=e.handleNewFilterChange,t=e.newFilter;return Object(r.jsx)("form",{children:Object(r.jsxs)("div",{children:["filter shown with: ",Object(r.jsx)("input",{onChange:n,value:t})]})})},f=function(e){var n=e.message;return null===n?null:Object(r.jsx)("div",{style:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n})},j=function(e){var n=e.message;return null===n?null:Object(r.jsx)("div",{style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n})},h=t(4),m=t.n(h),O="/api/persons",g=function(){return m.a.get(O).then((function(e){return e.data}))},p=function(e){return m.a.post(O,e).then((function(e){return e.data}))},v=function(e){var n=O+"/"+e;return m.a.delete(n).then((function(e){return console.log(e),e}))},x=function(e,n){var t=O+"/"+e;return m.a.put(t,n).then((function(e){return e.data}))},w=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],u=Object(c.useState)(""),l=Object(i.a)(u,2),h=l[0],m=l[1],O=Object(c.useState)(""),w=Object(i.a)(O,2),N=w[0],y=w[1],S=Object(c.useState)(""),C=Object(i.a)(S,2),k=C[0],T=C[1],F=Object(c.useState)(null),P=Object(i.a)(F,2),B=P[0],D=P[1],E=Object(c.useState)(null),z=Object(i.a)(E,2),A=z[0],J=z[1];Object(c.useEffect)((function(){g().then((function(e){return o(e)}))}),[]);var R=function(e){D(e),setTimeout((function(){D(null)}),5e3)},U=function(e){J(e),setTimeout((function(){J(null)}),5e3)};return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(f,{message:B}),Object(r.jsx)(j,{message:A}),Object(r.jsx)(b,{handleNewFilterChange:function(e){T(e.target.value)},newFilter:k}),Object(r.jsx)("h2",{children:"Add a new person"}),Object(r.jsx)(d,{addPerson:function(e){if(e.preventDefault(),t.map((function(e){return e.name})).includes(h)){if(window.confirm("".concat(h," is already in the phonebook - replace the old number with the new one?"))){var n=t.filter((function(e){return e.name===h})),r=n[0].id,c=Object(a.a)(Object(a.a)({},n[0]),{},{number:N});x(r,c).then((function(e){o(t.map((function(n){return n.id!==r?n:e}))),R("Updated number for ".concat(c.name))})).catch((function(e){U("Updating entry ".concat(c.name," faced an error"))}))}}else{var u={name:h,number:N};p(u).then((function(e){console.log("Setting stuff"),o(t.concat(e)),R("Added new entry for ".concat(u.name))})).catch((function(e){console.log("Error: ".concat(e.response.data.error)),U(e.message)}))}m(""),y("")},handleNewPersonChange:function(e){m(e.target.value)},handleNewNumberChange:function(e){y(e.target.value)},newName:h,newNumber:N}),Object(r.jsx)(s,{persons:function(){var e=t.map((function(e){return e.name})).filter((function(e){return e.includes(k)}));return t.filter((function(n){return e.includes(n.name)}))}(),deleteThisName:function(e){var n=t.filter((function(n){return n.id===e})),r="Should ".concat(n[0].name," be deleted from the phonebook?");window.confirm(r)&&v(e).then((function(r){o(function(e,n){return e.filter((function(e){return e.id!==n}))}(t,e)),R("Deleted entry for ".concat(n[0].name))})).catch((function(e){U("Deletion of entry ".concat(n[0].name," faced an error"))}))}})]})};t(38);u.a.render(Object(r.jsx)(w,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.91765c1a.chunk.js.map